% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_directory.R
\name{fetch_directory}
\alias{fetch_directory}
\title{Fetch Oklahoma school directory data}
\usage{
fetch_directory(end_year = NULL, tidy = TRUE, use_cache = TRUE)
}
\arguments{
\item{end_year}{A school year. Year is the end of the academic year - eg 2024-25
school year is year '2025'. Valid values are 2025-2026 (limited history available).}

\item{tidy}{If TRUE (default), returns data in a standardized format with
consistent column names. If FALSE, returns raw column names from source.}

\item{use_cache}{If TRUE (default), uses locally cached data when available.
Set to FALSE to force re-download from OSDE.}
}
\value{
Data frame with directory data including:
\describe{
\item{end_year}{School year end (e.g., 2025 for 2024-25)}
\item{district_id}{District code (e.g., "55I001")}
\item{school_id}{School site code (e.g., "55I001105") - NA for district rows}
\item{district_name}{District name}
\item{school_name}{School/site name - NA for district rows}
\item{county}{County name}
\item{superintendent_name}{District superintendent (district rows only)}
\item{superintendent_email}{Superintendent email (district rows only)}
\item{principal_name}{School principal (school rows only)}
\item{principal_email}{Principal email (school rows only)}
\item{board_president}{Board president name (district rows only)}
\item{phone}{Phone number}
\item{fax}{Fax number (district rows only)}
\item{website}{Website URL (district rows only)}
\item{physical_address, physical_city, physical_state, physical_zip}{Physical address}
\item{mailing_address, mailing_city, mailing_state, mailing_zip}{Mailing address}
\item{grades_served}{Grade span (e.g., "PK-12") - school rows only}
\item{enrollment}{Total enrollment - school rows only}
}
}
\description{
Downloads and processes school directory data from the Oklahoma State
Department of Education's public data files. Returns contact information
for districts and schools including principal/superintendent names,
addresses, and phone numbers.
}
\examples{
\dontrun{
# Get 2025 school directory data (2024-25 school year)
dir_2025 <- fetch_directory(2025)

# Get raw format (original column names)
dir_raw <- fetch_directory(2025, tidy = FALSE)

# Force fresh download (ignore cache)
dir_fresh <- fetch_directory(2025, use_cache = FALSE)

# Filter to specific district
okc_ps <- dir_2025 |>
  dplyr::filter(district_id == "55I001")

# Get all principals
principals <- dir_2025 |>
  dplyr::filter(!is.na(principal_name)) |>
  dplyr::select(district_name, school_name, principal_name, principal_email)
}
}
